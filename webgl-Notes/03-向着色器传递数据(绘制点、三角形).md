ç¬¬ä¸€ç¯‡ä»‹ç»äº†å¯åŠ¨ webgl ç¨‹åºçš„æµç¨‹ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ WebGLProgram ç»‘å®šã€ç¼–è¯‘  GLSL ç€è‰²å™¨æºä»£ç çš„æ­¥éª¤ã€‚

ç¬¬ä¸€ç¯‡ç»˜åˆ¶çš„æ˜¯ä¸€ä¸ªç‚¹ï¼Œé€šè¿‡ä¿®æ”¹ç€è‰²å™¨æºä»£ç ï¼Œå¯ä»¥æ”¹ç‚¹çš„é¢œè‰²ã€å°ºå¯¸ã€å¤§å°ï¼Œé‚£ä¹ˆå¦‚ä½•ä» js ä¸­ä¼ é€’æ•°æ®å‘¢ï¼Ÿ

å…ˆçœ‹çœ‹ç”»å‡ºæ¥å•¥æ ·ï¼ˆcanvaså…ƒç´ åŠ äº†ä¸ªå¤–æ¡†ï¼‰ï¼š

![image-20200729010020434](attachments/image-20200729010020434.png)

åŒå¤§ä¸ªæµè§ˆå™¨ç•Œé¢ï¼Œç”»äº†ä¸ªç«çº¢è‰²çš„ç‚¹...



# 1. â€œæ¥ä½â€

æ—¢ç„¶ä¼ é€’æ•°æ®ï¼Œé‚£ä¹ˆ GLSL æºä»£ç ä¸­è‚¯å®šæœ‰æ¥æ”¶å™¨ï¼Œæ˜¯ä¸Šä¸€ç¯‡æåˆ°çš„ è¢« `attribute`ã€`uniform`ã€`varying` ä¿®é¥°çš„é‚£äº›å˜é‡

`attribute` å˜é‡ï¼Œåœ¨é¡¶ç‚¹ç€è‰²å™¨ç”¨äº æ¥å— æ¯ä¸ªé¡¶ç‚¹ ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ åæ ‡ `vec4`ã€uv `vec2`ã€æ³•çº¿ `vec3`ã€é¡¶ç‚¹é¢œè‰² `vec4` ç­‰

`uniform` å˜é‡ï¼Œåœ¨é¡¶ç‚¹ç€è‰²å™¨æˆ–ç‰‡å…ƒç€è‰²å™¨ æ¥å— æ™®é€šæ•°æ®ï¼Œä¾‹å¦‚ è½¬æ¢çŸ©é˜µ `mat234` ã€å›ºå®šé¢œè‰² `vec4` ç­‰

`varying` å˜é‡ï¼Œç”¨äºé¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œç°åœ¨è¿˜ç”¨ä¸åˆ°



## é¡¶ç‚¹ç€è‰²å™¨

``` GLSL
/* GLSL */
attribute vec4 point;
void main() {
    gl_Position = point;
    gl_PointSize = 10.0;
}
```

## ç‰‡å…ƒç€è‰²å™¨

``` GLSL
/* GLSL */
// æŒ‡å®šæ•°å€¼ç²¾åº¦
precision mediump float;
uniform vec4 fragColor;
void main() {
    gl_FragColor = fragColor;
}
```



# 2. ä¼ è¿‡å»

ä¸Šé¢å·²ç»æœ‰ä¸¤ä¸ªå‘æ¥æ”¶æ•°æ®äº†ï¼š`attribute vec4 point` å’Œ `uniform vec3 fragColor`

é‚£ä¹ˆå¦‚ä½•ä¼ é€’æ•°æ®åˆ°è¿™ä¸¤ä¸ªå‘é‡Œå‘¢ï¼Ÿ



``` JS
/* JavaScript */

const gl = initShader(canvas, vs, fs) // æˆ‘å«Œåˆ›å»º ä¸Šä¸‹æ–‡ã€programï¼Œç»‘å®šã€ç¼–è¯‘ç€è‰²å™¨ç­‰æ­¥éª¤ç¹æ‚ï¼Œå°è£…äº†ä¸€ä¸ªå‡½æ•°ï¼Œä¸‹é¢ä¼šç»™å‡º

let pointLocation = gl.getAttribLocation(gl.program, 'point')
let pointColorLocation = gl.getUniformLocation(gl.program, 'fragColor')
gl.vertexAttrib3f(pointLocation, 0.3, 0.2, 0.0)
gl.uniform4f(pointColorLocation, 1.0, 0.4, 0.6, 1.0)

gl.clear(gl.COLOR_BUFFER_BIT)
gl.drawArrays(gl.POINTS, 0, 1) // ç»˜åˆ¶ ç‚¹ ï¼Œä» 0 å¼€å§‹ï¼Œç”» 1 ä¸ª
```

è¿™ä¾¿æ˜¯æœ€æ ¸å¿ƒçš„ä»£ç äº†ï¼Œé¦–å…ˆä½¿ç”¨ä¸¤ä¸ªå˜é‡è®°å½• glsl ä¸­é‚£ä¸¤ä¸ªå‘çš„ä½ç½®ï¼Œæ–¹ä¾¿ä¼ é€’æ•°æ®ï¼Œç”¨äº†ä¸¤ä¸ªæ–¹æ³•ï¼š

- `WebGLRenderingContext.getAttribLocation(WebGLProgram, string)` è¿”å›å€¼æ˜¯ `number`ï¼Œè‹¥ï¼œ0ä»£è¡¨ä¸å­˜åœ¨

- `WebGLRenderingContext.getUniformLocation(WebGLProgram, string)` è¿”å›å€¼æ˜¯ `WebGLUniformLocation`ï¼Œè‹¥ä¸ºnullä»£è¡¨ä¸å­˜åœ¨

> æ³¨æ„ï¼Œå°½ç®¡ `initShader()` å‡½æ•°è¿”å›çš„æ˜¯ `WebGLRenderingContext` å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ MDN ä¸­è¿™ä¸ªç±»å¹¶æ²¡æœ‰ `program` è¿™ä¸ª ç±»ä¸º `WebGLProgram` çš„å±æ€§ï¼Œæ˜¯æˆ‘åœ¨ `initShader ` å‡½æ•°ä¸­è¿”å› gl å¯¹è±¡å‰ç»‘å®šçš„ã€‚

æ¥ç€ï¼Œé€šè¿‡ä¸¤ä¸ªæ–¹æ³•æŠŠé¡¶ç‚¹ã€é¢œè‰²æ•°æ®ä¼ é€’åˆ°è¿™ä¸¤ä¸ªå‘ï¼š

`WebGLRenderingContext.vertexAttrib3f(attributeLocation:number, x:number, y:number, z:number)`

`WebGLRenderingContext.uniform4f(attributeLocation:WebGLUniformLocation, x:number, y:number, z:number, w:number)`

> å‡½æ•°ç­¾åä¹ æƒ¯ç”¨ typescript çš„é£æ ¼äº†ã€‚

æœ€åè°ƒç”¨ clear() æ¸…é™¤ç»˜å›¾ç¼“å­˜ï¼Œè°ƒç”¨ drawArrays() ç»˜åˆ¶ä¼ å…¥çš„æ•°æ®ã€‚

## (ï¼¾ï¼µï¼¾)ï¼šinitShader() æºç 

``` JS
function initShader(canvas, vsSource, fsSource){
    if (!(canvas instanceof HTMLElement))
        return
    if (typeof vsSource != "string" && typeof fsSource != "string")
        return

    // resize(canvas);
    let gl = canvas.getContext('webgl')
    
    const vertexShader = gl.createShader(gl.VERTEX_SHADER)
    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)
    gl.shaderSource(vertexShader, vsSource)
    gl.shaderSource(fragmentShader, fsSource)
    gl.compileShader(vertexShader)
    gl.compileShader(fragmentShader)

    const glProgram = gl.createProgram()
    gl.attachShader(glProgram, vertexShader)
    gl.attachShader(glProgram, fragmentShader)
    gl.linkProgram(glProgram)
    gl.useProgram(glProgram)

    gl.program = glProgram // ç»‘å®š program åˆ° gl å˜é‡ä¸Šï¼Œæ–¹ä¾¿è¯»å–

    return gl
}
```

æ³¨æ„è¿”å› gl å‰ç»‘å®šçš„ programã€‚



# 3. ä»å¤–éƒ¨ä¼ å…¥ç‚¹æ•°æ®æ€»ç»“

## â‘  æ ¸å¿ƒæ–¹æ³•

- **`WebGLRenderingContext.getAttribLocation(WebGLProgram, string)` ** ï¼šè·å– attribute ç±»å‹çš„å˜é‡ä½ç½®ï¼Œè¿”å› number
- **`WebGLRenderingContext.getUniformLocation(WebGLProgram, string)`** ï¼šè·å– uniform ç±»å‹çš„å˜é‡ä½ç½®ï¼Œè¿”å› WebGLUniformLocation
- **`WebGLRenderingContext.vertexAttrib3f(attributeLocation:number, x:number, y:number, z:number)`** ï¼šè®¾ç½® attribute vec3 ç±»å‹ çš„æ•°æ®
- **`WebGLRenderingContext.uniform4f(attributeLocation:WebGLUniformLocation, x:number, y:number, z:number, w:number)`** ï¼šè®¾ç½® uniform vec4 ç±»å‹çš„æ•°æ®

ä¸Šä¸¤ä¸ªè·å–å˜é‡ä½ç½®ï¼Œä¸‹ä¸¤ä¸ªä¼ é€’æ•°æ®

## â‘¡ æ€è€ƒ

æ—¢ç„¶ program å’Œ shader ä»£ç éƒ½å®Œæˆç¼–è¯‘ã€é“¾æ¥äº†ï¼Œé‚£ä¹ˆåªèƒ½è¯´æ˜ä¸€ä»¶äº‹ï¼š

shaderï¼Œä¹Ÿå³ç€è‰²å™¨ä»£ç ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ˜¯å›ºåŒ–åœ¨ GPU ä¸­ï¼Œåç»­è¿˜èƒ½ä¼ é€’ä»€ä¹ˆæ•°æ®ï¼Œå®Œå…¨é  shader æºä»£ç æ§åˆ¶ã€‚

è¿™ä¸æ™®é€šçš„ å¯æ‰§è¡Œç¨‹åº æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ æºä»£ç  ğŸ‘‰ ç¨‹åºï¼Œç„¶å ç¨‹åºè°ƒç”¨ ğŸ‘‰ ä¼ å€¼è¿›å»ã€‚



# 4. ç»˜åˆ¶ä¸‰è§’å½¢ï¼šä½¿ç”¨ TypedArray

ä¸èƒ½å†æ„šè ¢åœ°ä¸€ä¸ªä¸€ä¸ªç‚¹ç»˜åˆ¶äº†ï¼Œè¿™æ¬¡è¦ä¸€æ¬¡ç”»ä¸‰ä¸ªç‚¹ï¼Œå¹¶ç»˜åˆ¶å‡ºè¿™ä¸‰ä¸ªç‚¹æ„æˆçš„ä¸‰è§’å½¢åŒºåŸŸã€‚

ç€è‰²å™¨ä»ç„¶ä¸å˜ï¼Œçœ‹çœ‹ç»˜åˆ¶ä¸‰è§’å½¢éœ€è¦ä»€ä¹ˆä»£ç ï¼š

``` JS
/* JavaScript */

const gl = initShader(canvas, vs, fs)

// TODO ç»˜åˆ¶ä¸‰è§’å½¢çš„ä»£ç ï¼Œä¸‹é¢å†ç»™

gl.clear(gl.COLOR_BUFFER_BIT)
gl.drawArrays(gl.TRIANGLES, 0, 3) // ç”»ä¸‰è§’å½¢ï¼Œä»ç¬¬ 0 ä¸ªå¼€å§‹ï¼Œ ç”» 3 ä¸ªç‚¹ï¼Œæ„æˆ ä¸‰è§’å½¢
```

æ³¨æ„æœ€åä¸€ä¸ª `drawArrays`ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å·²ç»ä» `gl.POINTS`ï¼Œå˜æˆäº† `gl.TRIANGLES`ï¼Œnumber å‡ºæ¥å°±æ˜¯ 4ï¼ŒPOINTS æ˜¯0.

è¿™ä¸ªå‚æ•°ï¼Œè¯ é‡Šäº†ä¸ºä»€ä¹ˆç»˜åˆ¶çš„å‡½æ•°å« `drawArrays()` è€Œä¸æ˜¯ `drawPoints`ã€`drawPolygon`ï¼Œå› ä¸ºå¤ªå¤šäº†è¿˜ä¸å¦‚ç”¨ä¸€ä¸ªå‚æ•°æŒ‡å®šï¼Œå‡å°‘å¯¹å¤–çš„APIã€‚

`drawArray()` å…¶å®å°±æ˜¯ç»˜åˆ¶ ç¨‹åºå†…çš„é¡¶ç‚¹ç”¨çš„ï¼Œè‡³äºé¡¶ç‚¹æ€ä¹ˆç»˜åˆ¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šã€‚

æ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ `WebGLRenderingContext.POINTS/TRIANGLES` ç­‰çš„å«ä¹‰ï¼Œå®ƒä»¬æ˜¯ä¸€äº›å¸¸æ•°ï¼Œä»£è¡¨äº†é¡¶ç‚¹å¦‚ä½•è¢«ç»˜åˆ¶ï¼Œç»˜åˆ¶æˆç‚¹ï¼Œçº¿ï¼Œè¿˜æ˜¯ä¸‰è§’å½¢ï¼Œæ˜¯ä¸‰è§’å½¢çš„è¯ï¼Œä¸‰è§’å½¢å¦‚ä½•æ‹¼æ¥ç­‰ã€‚æˆ‘ä»¬è¿™é‡Œç”¨çš„æ˜¯ `gl.TRIANGLES`ã€‚

æ³¨æ„ï¼Œå¦‚æœä¼ å…¥çš„ç‚¹æ•°ä¸æ˜¯3çš„å€æ•°ï¼Œæœ€åä½™ä¸‹çš„ç‚¹è¢«å¿½ç•¥ã€‚

è§ä¸‹å›¾ï¼š

![img](attachments/1000410-20190904110713696-2062670901.png)

æ‰¯è¿œäº†ï¼Œçœ‹çœ‹ç”»ä¸‰è§’å½¢çš„æ ¸å¿ƒä»£ç ï¼š

``` JS
let vertexBuffer = new Float32Array([0, 0.5, -0.5, -0.5, 0.5, -0.5]) // äºŒç»´åæ ‡çš„ä¸‰ä¸ªç‚¹ï¼Œå  6 Ã— 4(8bit eq. 1byte) = 24bytes

/** å¼€è¾Ÿæ˜¾å­˜ï¼Œç»‘å®šæ•°æ®ï¼Œèµ‹äºˆjså†…çš„æ•°æ® */
let buffer = gl.createBuffer()
gl.bindBuffer(gl.ARRAY_BUFFER, buffer)
gl.bufferData(gl.ARRAY_BUFFER, vertexBuffer, gl.STATIC_DRAW)

/** è·å–attributeï¼Œå¹¶è§£æbufferå†…çš„æ•°æ® */
let pointLocation = gl.getAttribLocation(gl.program, 'point') // è·å–é¡¶ç‚¹ç€è‰²å™¨å†… attribute å˜é‡ point çš„æŒ‡é’ˆ
gl.vertexAttribPointer(pointLocation, 2, gl.FLOAT, false, 0, 0)
gl.enableVertexAttribArray(pointLocation)
```

## â‘  åˆ›å»ºå†…å­˜æ•°ç»„

ä½¿ç”¨æ™®é€š JavaScript æ•°ç»„æ€§èƒ½ä¸å¤Ÿï¼ŒHTML5è§„èŒƒä¸­ä¸ºäº†æ”¯æŒæ–‡ä»¶è¯»å†™ã€æ–‡ä»¶æµçš„æ“ä½œã€webglæ‰€éœ€çš„é«˜æ€§èƒ½ï¼Œæ¨å‡ºäº†ç±»å‹æ•°ç»„çš„APIã€‚

å…¶ä¸­ï¼Œ`Float32Array` å°±æ˜¯ä¸€ç§ç±»å‹æ•°ç»„ï¼Œå®ƒçœŸå®çš„æ•°æ®æ˜¯ `Float32Array.buffer` ä¸­å­˜å‚¨çš„ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ã€‚

è¿™é‡Œä¼ é€’äº† 6 ä¸ªæ•°å­—ï¼Œä»£è¡¨äº†äºŒç»´ä¸­çš„ä¸‰ä¸ªç‚¹ï¼Œé‚£ä¹ˆ webgl å¦‚ä½•çŸ¥é“æˆ‘è¿™è¿ç»­ä¸¤ä¸ªå–ä¸ºä¸€ä¸ªç‚¹å‘¢ï¼Ÿå€’æ•°ç¬¬äºŒè¡Œå°±æœ‰ä¸ª2çœ‹åˆ°äº†å—ï¼Ÿå¾…ä¼šå†è§£é‡Šã€‚

## â‘¡ å¼€è¾Ÿä¸€å—æ˜¾å­˜å¹¶ç»‘å®šå†…å­˜æ•°ç»„

ä¸­é—´çš„ä¸‰è¡Œï¼š

- é€šè¿‡ `WebGLRenderingContext.createBuffer()` æ–¹æ³•ç”³è¯·ä¸€å—æ˜¾å­˜ï¼ˆæ­¤æ—¶æ˜¾å­˜ è¦å­˜æ”¾ ä»€ä¹ˆæ•°æ® ä¸çŸ¥é“ï¼‰ï¼Œæ˜¾å­˜ç”¨äºä¸å†…å­˜è¿›è¡Œäº¤äº’æ•°æ®ï¼Œæ³¨æ„è¿™ä¸ªæ–¹æ³•åœ¨å¤±è´¥æ—¶ä¼šè¿”å›nullã€‚
- ç„¶åé€šè¿‡ `WebGLRenderingContext.bindBuffer()` æŒ‡å®šè¿™å—æ˜¾å­˜çš„ç±»å‹æ˜¯ `WebGLRenderingContext.ARRAY_BUFFER`ï¼Œè¿™æ˜¯ä¸ªå¸¸æ•°æ¥ç€çš„ï¼Œ34962ï¼ŒGLTFæ ¼å¼ä¸­å¸¸è§ï¼Œè¿™ä¸ªå¸¸æ•°çš„æ„æ€æ˜¯ï¼Œè¿™å—æ˜¾å­˜è¦å­˜å‚¨é¡¶ç‚¹æœ‰å…³çš„æ•°æ®ã€‚å¦‚æœæŒ‡å®š `WebGLRenderingContext.ELEMENT_ARRAY_BUFFER`ï¼Œå³ 34963ï¼Œé‚£ä¹ˆå­˜å‚¨çš„æ˜¯é¡¶ç‚¹çš„ç´¢å¼•æ•°æ®ã€‚
- æœ€åé€šè¿‡ `WebGLRenderingContext.bufferData()` å°†å†…å­˜æ•°ç»„å­˜æ”¾çš„æ•°æ®ç»‘å®šåˆ°ç”³è¯·çš„å†…å­˜ä¸Šã€‚

æˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£æœ€åä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œæ‘˜æŠ„ ã€ŠWebGLç¼–ç¨‹æŒ‡å—ã€‹å¦‚ä¸‹ï¼š

WebGLRenderingContext.bufferData(target, data, usage)

| å‚æ•°   | å€¼ç±»å‹æˆ–å¯é€‰å€¼                                               | æ„ä¹‰                                                         |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| target | WebGLRenderingContext.ARRAY_BUFFER æˆ– WebGLRenderingContext.ELEMENT_ARRAY_BUFFER | å’Œ `bindBuffer` çš„é‚£ä¸ªå‚æ•°æ„ä¹‰ä¸€æ ·                           |
| data   | Float32Arrayç­‰ç±»å‹æ•°ç»„                                       | å†™å…¥è¿™å—æ˜¾å­˜çš„æ•°æ®                                           |
| usage  | WebGLRenderingContext.STATIC_DRAW/STREAM_DRAW/DYNAMIC_DRAW   | STATIC_DRAWæ˜¯åªå†™å…¥ä¸€æ¬¡æ˜¾å­˜ï¼Œä½†è¦ç»˜åˆ¶å¤šæ¬¡ï¼›STREAM_DRAWæ˜¯åªå†™å…¥ä¸€æ¬¡æ˜¾å­˜ï¼Œç»˜åˆ¶æœ‰é™æ¬¡ï¼›DYNAMIC_DRAWæ˜¯å†™å…¥å¤šæ¬¡ï¼Œç»˜åˆ¶å¤šæ¬¡ |

åˆ°ç¬¬äºŒæ­¥è¿™ä¸‰è¡Œç»“æŸï¼Œå†…å­˜çš„å·¥ä½œå°±å®Œæˆäº†ï¼Œç°åœ¨æ•°æ®å·²ç»åˆ°æ˜¾å­˜ä¸­ã€‚

## â‘¢ è·å–glslä¸­é¢„ç•™çš„é¡¶ç‚¹å‘ä½ï¼Œä¼ å…¥æ˜¾å­˜ä¸­çš„æ•°æ®åˆ° gl ç¨‹åº

- `WebGLRenderingContext.getAttribLocation()`  è·å– attribute ç±»å‹çš„å‘ä½ï¼Œä¸Šé¢æœ‰è¯¦è§£ä¸è¯´äº†
- `WebGLRenderingContext.vertexAttribPointer()` ï¼šå‘Šè¯‰ gl ç¨‹åºå¦‚ä½•è§£ææ•°æ®
- `WebGLRenderingContext.enableVertexAttribArray()`  ï¼šå¯ç”¨ attribute å˜é‡ ä¸ æ˜¾å­˜æ•°æ® çš„è¿æ¥

åé¢è¿™ä¸ªä¿©æ–¹æ³•å¾ˆå…³é”®ï¼Œçœ‹çœ‹å®ƒä»¬çš„å‡½æ•°ç­¾åï¼š

`vertexAttribPointer(location: number, size: number, type: enum, normalize: bool, stride: number, offset: number)`

| å‚æ•°      | å€¼ç±»å‹æˆ–å¯é€‰å€¼                                               | æ„ä¹‰                                                         |
| --------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| location  | ç”± getAttribLocation() è¿”å›çš„å€¼ï¼Œå³ attribute å˜é‡åœ¨ gl ç¨‹åºä¸­çš„åœ°å€ | /                                                            |
| size      | 1~4                                                          | ç±»å‹æ•°ç»„ä¸­å¤šå°‘ä¸ªå€¼ä¸ºä¸€ç»„ï¼Œå¦‚æœ size æ¯” attribute å˜é‡çš„æ•°å€¼ç±»å‹å°ï¼Œé‚£ä¹ˆé»˜è®¤æŒ‰ attribute å˜é‡çš„é•¿åº¦è¡¥é½ï¼Œè¡¥0ä½ï¼›ä¾‹å¦‚ï¼Œsize = 2ï¼Œä½†æ˜¯attribute æ˜¯vec4ï¼Œé‚£ä¹ˆç¬¬3ã€4åˆ†é‡ä¸º0. |
| type      | gl.UNSIGNED_BYTE/SHORT/UNSIGNED_SHORT/INT/UNSIGNED_INT/FLOAT | æ•°å­—çš„å€¼ç±»å‹                                                 |
| normalize | true false                                                   | å¦‚æœä¼ å…¥çš„æ•°æ®å€¼åŸŸè¶…è¿‡ [0,1] æˆ– [-1, 1]ï¼Œé‚£ä¹ˆå¡«å…¥false å¯ä»¥å½’ä¸€åŒ–æ•°æ® |
| stride    | é»˜è®¤0                                                        | å‰ä¸€ä¸ªå’Œåä¸€ä¸ª attribute æ•°æ®ä¸­é—´å¤¹å¤šå°‘ä¸ªå­—èŠ‚                |
| offset    | é»˜è®¤0                                                        | å½“å‰attribute å˜é‡ä»ç¬¬å‡ å­—èŠ‚å¼€å§‹å­˜å‚¨æ•°æ®                     |

æ­¤æ–¹æ³•çš„æ„ä¹‰æ˜¯ï¼Œå‘Šè¯‰ gl ç¨‹åºé‚£å—ä½ç½®çš„æ˜¾å­˜è¦æŒ‰å•¥æ–¹å¼è¯»å–ï¼Œgl ç¨‹åºå°±ä¼šæŒ‰ä¼ å…¥çš„è¿™äº›å‚æ•°è§£ææ˜¾å­˜ä¸Šçš„ attribute ç±»å‹æ•°æ®ã€‚åœ¨ä»£ç ä¸­ï¼Œè‡ªç„¶æŒ‡å®šçš„å°±æ˜¯ æ¯ 2 ä¸ª gl.FLOAT æ•°æ®ä¸ºä¸€ä¸ªåæ ‡çš„é¡¶ç‚¹æ•°æ®å•¦ï¼Œè¿™ä¸ªæ•°æ®å­˜å‚¨åœ¨ åä¸º â€˜pointâ€™ çš„ attribute å˜é‡ä¸­ï¼ˆè§ shaderä»£ç ï¼‰ã€‚

`enableVertexAttribArray(location: number)`ï¼šå‚æ•°å’Œä¸Šé¢è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ„ä¹‰ä¸€è‡´ã€‚è¿™ä¸ªæ–¹æ³•æ„ä¹‰æ˜¯ï¼Œå¯ç”¨ attribute å˜é‡ï¼Œ**å»ºç«‹æ˜¾å­˜ä¸ gl ç¨‹åºä¸­ attribute å˜é‡çš„è¿æ¥ã€‚**

![image-20200729011627844](attachments/image-20200729011627844.png)